(this["webpackJsonpreact-virtuallist"]=this["webpackJsonpreact-virtuallist"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(6),i=n.n(o),s=(n(13),n(1)),r=n(2),l=n(3),h=n(4),u=(n(14),n(7)),d=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){return Object(s.a)(this,n),e.call(this,t)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.props.cacheOffset(this.node,this.props.index)}},{key:"render",value:function(){var t=this,e=this.props,n=e.index,a=e.data;return c.a.createElement("div",{className:"list-item",ref:function(e){return t.node=e}},c.a.createElement("span",null,n,".",a),c.a.createElement("span",null,n,"\u6d4b\u8bd5\u6570\u636e"))}}]),n}(a.Component),f=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).cacheOffset=function(t,e){var n=t.getBoundingClientRect().top+window.pageYOffset;a.cache.push({index:e,top:n,bottom:n+a.height}),console.log("cache",a.cache)},a.handleScroll=function(){var t=window.scrollY;console.log("scrollTop",t),a.updateIndex(t),a.updateView(),a.scrollTop=t},a.height=50,a.start=0,a.end=0,a.state={countData:[],topOffset:0,btmOffset:0},a.vData=new Array(500).fill("kkb"),a.cache=[],a.anchor={index:0,top:0,bottom:0},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.count=Math.ceil(window.innerHeight/this.height),this.end=this.start+this.count,this.updateView(),window.addEventListener("scroll",this.handleScroll,!1)}},{key:"updateIndex",value:function(t){var e=this.cache.find((function(e){return e.bottom>=t}));console.log("cache",this.cache,e),this.anchor=Object(u.a)({},e),this.start=this.anchor.index,this.end=this.start+this.count}},{key:"updateView",value:function(){console.log("start",this.start,this.end);var t=this.vData.slice(this.start,this.end);console.log("countData",t),this.setState({topOffset:this.anchor.top,btmOffset:(this.vData.length-this.end)*this.height,countData:t})}},{key:"render",value:function(){var t=this,e=this.state,n=e.countData,a=e.btmOffset,o=e.topOffset;return console.log("countData",n),c.a.createElement("div",{className:"virtual-wrapper",style:{paddingTop:"".concat(o,"px"),paddingBottom:"".concat(a,"px")}},n.map((function(e,n){return c.a.createElement(d,{key:n,data:e,index:t.start+n,cacheOffset:t.cacheOffset})})))}}]),n}(a.PureComponent),p=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={},a}return Object(r.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"app"},c.a.createElement(f,null))}}]),n}(a.Component);i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p,null)),document.getElementById("root"))},8:function(t,e,n){t.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.446a6d43.chunk.js.map